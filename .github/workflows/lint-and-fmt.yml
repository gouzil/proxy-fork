name: Lint and Format

on:
  push:
    branches: [main]
  pull_request:
  merge_group:
  workflow_dispatch:


jobs:
    clippy:
        runs-on: ubuntu-latest
        steps:
            - uses: actions/checkout@v5
            - uses: dtolnay/rust-toolchain@stable
              with:
                components: clippy
            - uses: Swatinem/rust-cache@v2.8.1
            - run: cargo clippy --all-targets --all-features

    fmt:
        runs-on: ubuntu-latest
        steps:
        - uses: actions/checkout@v5
        - uses: dtolnay/rust-toolchain@nightly
          with:
            components: rustfmt
        - run: cargo fmt --all -- --check